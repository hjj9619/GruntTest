<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>【 2016/5/28 】</title><link rel="stylesheet" href="css/grunt.css"></head><body><div class="one"><h2>安装Grunt-cli</h2><h4>安装grunt-cli之前应该先安装nodejs,</h4>grunt-cli 是grunt运行的基础，具体安装过程如下：<br>npm install grunt-cli -g<br>-g(global)：表示全局安装，在什么地方都可以使用<br></div><div class="two"><h2>创建一个grunt的测试项目</h2>新建一个文件夹，文件夹里至少包含两个配置文件，而且这两个文件应该在项目的根目录<h3>1. Gruntfile.js</h3>这个js文件就是grunt 的配置文件， 先不管他， 后边再说<h3>2.package.json</h3><h4>插件安装 一（还有第二种方法）</h4>这个json文件里边包含了你这个项目需要依赖的所有npm包（工具或者说是插件）<br>首先写这几个我觉得常用的工具 { "name": "GruntTest", "version": "0.1.0", "devDependencies": { "grunt": "^1.0.1", "grunt-contrib-cssmin": "^1.0.1", "grunt-contrib-uglify": "^1.0.1", "grunt-contrib-watch": "^1.0.0", "load-grunt-tasks": "^3.5.0" "grunt-contrib-connect": "^1.0.2", "connect-livereload": "^0.5.4", } } name : 就是你这个项目的名称<br>version：就是你这个项目的版本号<br>devDependencies：这个里边的东西就是需要使用的工具<br>目前包含的有<br>grunt：最基本的<br>watch：监听文件的变动<br>uglify：压缩Js文件<br>cssmin: 压缩css文件<br>其余三个就是自动刷新浏览器所需要的工具, 先写在这儿就好了<br>然后就该安装这些工具了<br>在命令行工具里 进入这个 grunt测试项目的文件夹里，<br>然后输入 npm install， 接下来就等着安装吧，<br>安装完成后会在项目的根目录地下生成一个 node_modules 的文件夹， 所有安装的工具都在这里边<br><h4>插件安装 二</h4>现在这个json 文件 里边的工具是空的，如下： { "name": "GruntTest", "version": "0.1.0", "devDependencies": { // 这里边是空的 }，<br>现在我们还是需要之前的那些工具该怎么办呢？<br>很简单：只需要通过命令行工具进入 项目的根目录，<br>然后通过 npm install --save-dev 工具名 的方式来安装；<br>--save-dev 大概意思就是构建这个项目依赖， 首先我们需要安装的是 最基础的 grunt 工具（这个和之前安装的grunt-cli是不一样的）<br>只需要输入以下命令：<br>npm install --save-dev grunt<br>接下来再看看 package.json 文件， 是不是devDependencies中就有你刚刚安装好的这个插件了？<br>而且node_modules 这个插件的文件夹了<br>但是偶尔也会有意外发生: 譬如 node_modules文件下有这个插件了，<br>但是package.json 中却没有出现这个插件<br>这个就需要你手动将这个插件写到 json 文件中了<br>具体写法仿照 其他的插件写就好了： 如下<br>"devDependencies": { '插件名称’ : '版本信息', "grunt": "^1.0.1", } 这个版版本信息就可以到 node_modules 文件夹下具体插件的文件夹下找一个package.json 的文件，<br>打开后 也是 json 格式的， 找到一个 version 后边的值， 这个就是他的版本信息，<br>将它写到 之前 插件名称后边的版本信息去<br>这样就好了<br>因为用第一种方法也会出现这种情况， 所以我才介绍这样的安装方法，<br>还要安装：grunt-contrib-watch 工具<br>命令如下：<br>npm install --save-dev grunt-contrib-watch<br>其他的工具以此类推<br>_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-<br>那么我们核对一下 ， 目前已经安装了很多插件了<br>具体的 package.json 文件应该如下： { "name": "GruntTest", "version": "0.1.0", "devDependencies": { "grunt": "^1.0.1", "grunt-contrib-cssmin": "^1.0.1", "grunt-contrib-uglify": "^1.0.1", "grunt-contrib-watch": "^1.0.0", "load-grunt-tasks": "^3.5.0" "grunt-contrib-connect": "^1.0.2", "connect-livereload": "^0.5.4", } }<br>如果核对成功的话就可以进行下一步了</div><div class="three"><h2>Gruntfile.js</h2>接下来就是配置 gruntfile.js 文件的时候了<br>首先是一个函数<br>module.exports = function(grunt){ // grunt 是通过这个函数传参进来的 （这个参数叫其他的名字也可以，） //所有的配置都在这里边进行 //首先加载所有的任务 require('load-grunt-tasks')(grunt); //然后申明一个函数 grunt.initConfig({ //这又是传入的一个json 用来配置 具体的任务 //那我首先配置 uglify 任务（压缩JS） uglify:{ //开始 // 其他更详细的具体配置还可以参考 官方文档 build:{ src: 'js/script.js', //需要压缩的js源文件 的路径 包含文件名 dest: 'js/script.min.js' //压缩后的js 文件存放的路径 包含文件名 } },// 结束 connect: { options: { port: 9000, hostname: '*', //默认就是这个值，可配置为本机某个 IP，localhost 或域名 livereload: 35720 //声明给 watch 监听的端口 }, server: { options: { open: true, //是否自动打开网页 base: [ '.' //主目录 ] } } }, cssmin:{ //css 文件压缩任务 options: { // 具体配置可以参考 官方文档 shorthandCompacting: false, roundingPrecision: -1 }, target: { files: { //‘压缩后的css文件路径’：‘需要压缩的css 文件的路径’, "css/style.min.css": "css/style.css", 'css/grunt.min.css': 'css/grunt.css' } } }, watch:{ livereload: { options: { livereload: '<%=connect.options.livereload%>' //监听前面声明的端口 35729 }, files: [ //监听下面文件的改变，就会实时执行以注册的任务 '*.html', 'css/{,*/}*.css', 'js/{,*/}*.js' ], tasks:['cssmin','uglify', 'connect'] } }, // watch End }) //载入相关的npm模块 ggrunt.loadNpmTasks('grunt-contrib-watch'); grunt.loadNpmTasks('grunt-contrib-uglify'); grunt.loadNpmTasks('grunt-contrib-cssmin'); //注册任务 grunt.registerTask('default',[ 'uglify', 'cssmin', 'connect','watch']) } // 到这儿 Gruntfile.js 就已经配置完成了， 现在只需要在 项目的根目录打开命令行工具， 运行 grunt 命令就好了， //你看到的将是自动打开了一个浏览器窗口，而且js css 文件的压缩也在执行， 并且每改动以此文件， 这些任务就会自动执行，并自动刷新浏览器 //如果还需要更多的任务， 就上官方文档查看具体配置吧 //亲测成功</div></body></html>